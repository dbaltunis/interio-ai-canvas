import { useState } from "react";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs";
import { Input } from "@/components/ui/input";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { ScrollArea } from "@/components/ui/scroll-area";
import { Separator } from "@/components/ui/separator";
import { Switch } from "@/components/ui/switch";
import { Label } from "@/components/ui/label";
import { ScreenshotUploader } from "@/components/documentation/ScreenshotUploader";
import { ScreenshotDisplay } from "@/components/documentation/ScreenshotDisplay";
import { useHasPermission } from "@/hooks/usePermissions";
import { 
  Search, BookOpen, Home, Briefcase, Users, Package, 
  Calendar, Settings, Shield, Zap, BarChart3, ShoppingCart,
  FileText, MessageSquare, Wrench, DollarSign, Globe,
  ChevronRight, ExternalLink, Lock
} from "lucide-react";

export default function Documentation() {
  const [searchQuery, setSearchQuery] = useState("");
  const [activeSection, setActiveSection] = useState("getting-started");
  const [adminMode, setAdminMode] = useState(false);
  
  // Check if user is admin/owner for screenshot management
  const isAdmin = useHasPermission('manage_settings');

  const sections = [
    {
      id: "getting-started",
      title: "Getting Started",
      icon: BookOpen,
      subsections: [
        { 
          id: "overview", 
          title: "What is InterioApp?", 
          content: "InterioApp is a professional business management platform specifically designed for interior designers, curtain installers, and window treatment specialists. It combines project management, client relationship management (CRM), inventory tracking, and business automation into one integrated system.\n\nKey Features:\n• Complete project lifecycle management from quote to installation\n• Advanced CRM with lead scoring and automated follow-ups\n• Comprehensive inventory management for fabrics, hardware, and materials\n• Automated quote generation and client communications\n• Team collaboration and role-based permissions\n• Financial tracking and analytics\n• Online store integration for e-commerce" 
        },
        { 
          id: "dashboard", 
          title: "Understanding Your Dashboard", 
          content: "The Dashboard is your command center. Access it from the top navigation bar or by clicking 'Dashboard' in the main menu.\n\nDashboard Components:\n\n1. Quick Stats Cards:\n   • Total Projects (active quotes and jobs)\n   • Active Clients (with recent activity)\n   • Revenue metrics (current month vs. previous)\n   • Pending Tasks and Appointments\n\n2. Recent Activity Feed:\n   Shows your latest project updates, client interactions, and system events in chronological order.\n\n3. Quick Actions:\n   • New Quote - Create a new quote for a client\n   • New Client - Add a new client to your CRM\n   • View Calendar - Access your appointments\n   • Inventory - Check stock levels\n\n4. Upcoming Appointments:\n   Displays your next 5 appointments with client names and times.\n\n5. Task List:\n   Shows pending tasks with priority indicators and due dates.\n\nThe dashboard automatically refreshes to show real-time data." 
        },
        { 
          id: "first-steps", 
          title: "Initial Setup Workflow", 
          content: "Complete these steps to get your InterioApp system ready:\n\nStep 1: Configure Your Business Profile (5 minutes)\n• Navigate to Settings (gear icon in top navigation)\n• Under 'Business Settings', enter:\n  - Company name and logo\n  - Contact information (address, phone, email)\n  - Tax settings (GST/VAT rates)\n  - Default measurement units (metric/imperial)\n  - Currency and timezone\n\nStep 2: Set Up User Roles & Permissions (10 minutes)\n• Go to Settings > Team & Permissions\n• Review the default roles: Owner, Admin, Manager, Staff\n• Customize permissions for each role if needed\n• Invite team members via email\n• Assign roles to team members\n\nStep 3: Create Your First Client (3 minutes)\n• Click 'Clients' in the main navigation\n• Click '+ New Client' button\n• Choose client type: B2B (business) or B2C (consumer)\n• Enter required information:\n  - Name/Company name\n  - Contact details (email, phone)\n  - Address\n  - Lead source (how they found you)\n• Set initial funnel stage (defaults to 'Lead')\n• Add any notes or tags\n\nStep 4: Add Inventory Items (15-30 minutes)\n• Navigate to 'Inventory' tab\n• Start with essential categories:\n\n  Fabrics:\n  - Click 'Fabrics' tab\n  - Click '+ Add Fabric'\n  - Enter: SKU, name, supplier, cost/sell price\n  - Add fabric specifications (width, repeat, composition)\n  - Upload swatch image\n  - Set stock levels and reorder points\n\n  Hardware:\n  - Click 'Hardware' tab\n  - Add tracks, poles, brackets, accessories\n  - Include pricing and stock information\n\n  Templates:\n  - Review pre-loaded treatment templates\n  - Customize default templates for your business\n  - Set pricing formulas and fullness ratios\n\nStep 5: Configure Job Statuses (5 minutes)\n• Go to Settings > Job Statuses\n• Review default statuses: Quote, Measuring Scheduled, Quoted, Approved, In Production, Installed, Completed\n• Add custom statuses if needed\n• Set color codes for visual identification\n• Configure automation triggers (optional)\n\nStep 6: Create Your First Quote (10 minutes)\n• Navigate to 'Projects' tab\n• Click '+ New Quote'\n• Select the client you created\n• Add project details:\n  - Job name/reference\n  - Job site address (can differ from client address)\n  - Project type (residential/commercial)\n• Add treatments:\n  - Click 'Add Treatment'\n  - Select template or create custom\n  - Enter measurements (width x drop)\n  - Choose fabric and hardware from inventory\n  - System auto-calculates pricing\n• Review totals and margins\n• Click 'Save Quote'\n• Send to client via email or generate PDF\n\nYou're now ready to use InterioApp! Explore additional features as needed." 
        },
      ]
    },
    {
      id: "jobs",
      title: "Jobs & Projects",
      icon: Briefcase,
      subsections: [
        { 
          id: "job-creation", 
          title: "Creating Quotes and Projects", 
          content: "InterioApp uses a two-phase workflow:\n\nPhase 1: QUOTE (Estimate/Proposal)\n• Navigate to Projects tab\n• Click '+ New Quote' button\n• Enter client details (or select existing client)\n• Add project information:\n  - Job reference/name\n  - Job site address (defaults to client address)\n  - Project type (residential/commercial)\n  - Status (defaults to 'Quote')\n\n• Add Treatments:\n  1. Click 'Add Treatment' in treatments section\n  2. Choose from:\n     - Template: Select pre-configured treatment\n     - Custom: Create from scratch\n  3. Enter measurements:\n     - Width (in meters or feet)\n     - Drop/Height\n     - Number of panels (for multi-panel treatments)\n  4. Select materials:\n     - Fabric: Choose from inventory (auto-calculates meterage)\n     - Hardware: Add tracks, poles, accessories\n     - Trimmings: Optional tiebacks, valances, etc.\n  5. System automatically calculates:\n     - Fabric requirements based on fullness ratio\n     - Cut drops and waste allowance\n     - Total cost and sell price\n     - Profit margin percentage\n\n• Review and Adjust:\n  - View total quote value\n  - Check profit margins\n  - Apply discounts if needed\n  - Add notes for client or internal use\n\n• Save Options:\n  - Save Draft: Keep working later\n  - Save and Email: Generates PDF and sends to client\n  - Save and Print: Create PDF for printing\n\nPhase 2: CONVERT TO PROJECT\nOnce client approves quote:\n• Open the quote\n• Click 'Convert to Project' button\n• This action:\n  - Creates a new project record\n  - Links to original quote\n  - Changes status to 'Approved'\n  - Enables production tracking\n  - Reserves inventory items\n  - Creates installation tasks\n\n• Project Management Features:\n  - Track production status\n  - Schedule installation\n  - Allocate materials from inventory\n  - Assign team members\n  - Log time and progress\n  - Update client on progress\n  - Mark as completed when installed" 
        },
        { 
          id: "job-templates", 
          title: "Treatment Templates", 
          content: "Templates speed up quote creation by pre-configuring common treatments.\n\nAccessing Templates:\n• Navigate to Inventory > Templates tab\n• View pre-loaded industry-standard templates\n• Covers all major treatment types\n\nPre-loaded Template Categories:\n\nRoller Blinds:\n• Standard light filtering\n• Blockout\n• Sunscreen (UV protection)\n• Dual (blockout + sunscreen)\n• External screens (weather resistant)\n• Insect screens\n\nRoman Blinds:\n• Flat fold\n• Cascade style\n• Hobbled\n\nVenetian Blinds:\n• Aluminum 25mm\n• Wood 50mm\n• Faux wood\n\nVertical Blinds:\n• Fabric vanes\n• PVC slats\n\nPanel Glides:\n• Standard\n• Blockout\n• Sheer\n\nShutters:\n• Plantation (basswood, PVC, aluminum)\n• Solid panel\n\nCellular/Honeycomb Shades:\n• Single cell\n• Double cell\n• Top-down bottom-up\n• Motorized\n\nCustomizing Templates:\n1. Select a template to edit\n2. Click 'Edit Template'\n3. Modify:\n   - Default fabric type\n   - Fullness ratio\n   - Heading style\n   - Manufacturing method\n   - Pricing formulas\n   - Labor rates\n4. Save as custom template\n5. Set as default for your business\n\nCreating New Templates:\n1. Click '+ New Template'\n2. Configure all parameters:\n   - Treatment category\n   - Measurement requirements\n   - Calculation formulas\n   - Default materials\n   - Pricing structure\n3. Test with sample measurements\n4. Save and activate\n\nTemplates automatically:\n• Calculate fabric meterage\n• Apply fullness ratios\n• Add seam allowances\n• Calculate hardware quantities\n• Price based on your markup rules" 
        },
        { 
          id: "pricing", 
          title: "Pricing & Quote Generation", 
          content: "InterioApp uses intelligent pricing with automatic calculations.\n\nPricing Components:\n\n1. Material Costs:\n   • Fabric: Cost per meter × quantity + waste allowance\n   • Hardware: Fixed or per-meter pricing\n   • Trimmings: Per-item pricing\n   • System tracks actual supplier costs\n\n2. Markup & Margins:\n   • Set in Settings > Business Settings > Pricing\n   • Default markup percentages:\n     - Fabrics: Configurable (typically 40-100%)\n     - Hardware: Configurable (typically 30-50%)\n     - Labor: Configurable (typically 30-50%)\n   • Category-specific markups override defaults\n\n3. Labor Pricing:\n   • Per treatment type (varies by complexity)\n   • Configurable hourly rates\n   • Automatic calculation based on treatment type\n   • Includes making, installation, or both\n\n4. Quote Adjustments:\n   • Apply percentage discounts\n   • Fixed amount discounts\n   • Custom line item adjustments\n   • Bulk order discounts\n\nAutomatic Calculations:\n• Fabric meterage based on:\n  - Window width × fullness ratio\n  - Drop height + hems/headings\n  - Pattern repeat matching\n  - Wastage allowance\n\n• Hardware quantities:\n  - Track length = window width + returns\n  - Bracket spacing (typically every 1m)\n  - End caps, connectors, etc.\n\nQuote Generation Process:\n1. System calculates all costs automatically\n2. Review calculations in quote builder\n3. Adjust prices or discounts if needed\n4. Preview quote document:\n   - Professional branded template\n   - Itemized pricing\n   - Terms and conditions\n   - Validity period\n   - Payment terms\n\n5. Delivery options:\n   • Email to client (PDF attached)\n   • Download PDF for printing\n   • Share via link\n   • Print directly\n\nQuote Versions:\n• Create multiple versions for same job\n• Compare options (e.g., budget vs. premium)\n• Client can select preferred option\n• Previous versions saved for reference\n\nPrice Books:\n• Create tiered pricing (retail, trade, wholesale)\n• Apply different margins by client type\n• Special pricing for regular customers\n• Seasonal promotions and discounts" 
        },
        { 
          id: "status-tracking", 
          title: "Job Status Workflow", 
          content: "Track jobs through their complete lifecycle using status stages.\n\nDefault Job Statuses:\n\n1. Quote (Initial Stage)\n   • Draft quote created\n   • Being prepared for client\n   • Not yet sent\n\n2. Quoted (Sent to Client)\n   • Quote sent to client\n   • Awaiting client decision\n   • Can set follow-up reminders\n\n3. Measuring Scheduled\n   • Client interested\n   • Appointment booked for measurements\n   • Pre-quote or confirmation measurements\n\n4. Approved (Client Accepted)\n   • Client approved quote\n   • Ready to convert to project\n   • Deposits collected\n\n5. In Production\n   • Materials ordered/allocated\n   • Manufacturing underway\n   • Making curtains/blinds\n\n6. Ready for Installation\n   • Items completed\n   • Quality checked\n   • Scheduled for installation\n\n7. Installing\n   • Team on-site\n   • Installation in progress\n   • May take multiple days\n\n8. Installed (Completed)\n   • Installation finished\n   • Client sign-off\n   • Final payment due\n\n9. Completed (Closed)\n   • Final payment received\n   • All work done\n   • Job archived\n\nCustom Statuses:\n• Add your own stages\n• Settings > Job Statuses > Add Status\n• Configure:\n  - Status name\n  - Color code\n  - Description\n  - Sort order\n  - Active/inactive\n\nStatus Automation:\n• Trigger actions on status change:\n  - Send email to client\n  - Create task for team\n  - Update inventory\n  - Send notifications\n  - Schedule follow-ups\n\nBulk Status Updates:\n• Select multiple jobs\n• Change status simultaneously\n• Add notes to all selected\n• Assign to team member\n\nStatus Reporting:\n• View jobs by status\n• Track average time in each stage\n• Identify bottlenecks\n• Monitor conversion rates (quote → project)\n\nStatus Visibility:\n• Color-coded badges on job cards\n• Filter jobs by status\n• Dashboard shows status distribution\n• Status history tracked for each job" 
        },
        { 
          id: "measurements", 
          title: "Measurement & Calculation Tools", 
          content: "Accurate measurements are critical for quotes. InterioApp provides tools to ensure precision.\n\nMeasurement Units:\n• Set default in Settings > Business Settings\n• Options: Metric (meters/cm) or Imperial (feet/inches)\n• System converts automatically if needed\n• Mixed mode available for international projects\n\nWindow Measurement Guide:\n\nFor Inside Mount (Recess):\n1. Measure width at three points:\n   - Top, middle, bottom of window recess\n   - Use smallest measurement\n2. Measure drop at three points:\n   - Left, center, right of window recess\n   - Use smallest measurement\n3. Check for:\n   - Recess depth (minimum required for treatment type)\n   - Obstructions (window handles, locks)\n   - Square corners (measure diagonals)\n\nFor Outside Mount (Face Fix):\n1. Measure window opening\n2. Add overlap:\n   - Standard: 10-15cm each side\n   - Light blockage: 15-20cm each side\n3. Measure from top of architrave\n4. Add drop below sill:\n   - Standard: 10-15cm\n   - Floor length: measure to floor less 1cm\n\nMeasurement Recording:\n• Create measurement sheets per job\n• Template includes:\n  - Room name/number\n  - Window identifier\n  - Width × Drop\n  - Mount type (inside/outside)\n  - Special notes\n  - Photo upload\n• Digital measurement sheets save automatically\n\nFabric Calculations:\nSystem automatically calculates:\n\n1. Finished Width:\n   Window width × fullness ratio\n   Example: 2m window × 2.5 fullness = 5m finished width\n\n2. Cut Width:\n   Finished width + seam allowances\n   Accounts for hem allowances\n\n3. Cut Drops:\n   Drop + top heading + bottom hem + allowances\n   Pattern repeat matching if applicable\n\n4. Total Meterage:\n   (Cut width ÷ fabric width) × cut drop\n   Rounds up to nearest 0.1m\n   Adds wastage allowance\n\nPattern Repeat:\n• Enter repeat size in fabric specifications\n• System automatically:\n  - Calculates drops needed per repeat\n  - Adds extra meterage for matching\n  - Positions patterns correctly\n• Minimizes waste while ensuring perfect match\n\nCalculation Overrides:\n• Manually adjust if needed\n• Add notes explaining variance\n• System shows comparison to auto-calc\n• Useful for special situations\n\nMeasurement Wizard:\n• Step-by-step guided process\n• Prompts for all required measurements\n• Built-in validation checks\n• Prevents common measurement errors\n• Photo upload at each step" 
        },
      ]
    },
    {
      id: "clients",
      title: "Client Management",
      icon: Users,
      subsections: [
        { 
          id: "client-profiles", 
          title: "Client Profiles & CRM", 
          content: "InterioApp includes a complete CRM system for managing client relationships.\n\nClient Types:\n\n1. B2C (Business to Consumer):\n   • Individual consumers\n   • Residential projects\n   • Homeowners and renters\n   • Fields: Name, email, phone, address\n\n2. B2B (Business to Business):\n   • Trade customers\n   • Businesses and organizations\n   • Interior designers, builders, property managers\n   • Additional fields: Company name, contact person, ABN/tax ID\n\nCreating Client Records:\n1. Navigate to Clients tab\n2. Click '+ New Client'\n3. Select client type (B2C/B2B)\n4. Enter required information:\n   • Basic Contact Info:\n     - Name (or Company name for B2B)\n     - Contact person (B2B only)\n     - Email address\n     - Phone number\n     - Mobile number\n   • Address Information:\n     - Street address\n     - Suburb/City\n     - State/Province\n     - Postcode\n     - Country\n   • Lead Information:\n     - How they found you (referral, Google, social media, etc.)\n     - Initial funnel stage\n     - Lead score (auto-calculated)\n   • Additional Details:\n     - Tags (for categorization)\n     - Notes (internal only)\n     - Preferences\n     - Custom fields\n\nClient Profile View:\nEach client profile includes:\n\n1. Overview Tab:\n   • Contact information (click-to-call, click-to-email)\n   • Client type badge\n   • Lead score and stage\n   • Quick stats: Total projects, revenue, last contact\n   • Quick actions: New quote, send email, schedule appointment\n\n2. Projects Tab:\n   • All quotes and projects for this client\n   • Status of each job\n   • Total value\n   • Filter by status or date\n   • Quick access to job details\n\n3. Activity Tab:\n   • Complete activity timeline\n   • Types of activities:\n     - Emails sent/received\n     - Phone calls logged\n     - Meetings and appointments\n     - Quotes created/sent\n     - Projects completed\n     - Payments received\n     - Notes added\n   • Chronological order (newest first)\n   • Filter by activity type\n   • Search within activities\n\n4. Emails Tab:\n   • All email correspondence\n   • Sent and received emails\n   • Email status (sent, delivered, opened)\n   • Attachments and documents\n   • Quick reply functionality\n\n5. Documents Tab:\n   • Uploaded files and attachments\n   • Generated quotes and invoices\n   • Signed contracts\n   • Installation photos\n   • Measurement sheets\n   • File preview and download\n\n6. Measurements Tab:\n   • Site measurement records\n   • Multiple windows per property\n   • Measurement photos\n   • Notes and specifications\n   • Export to PDF\n\nClient Intelligence:\n• Automatic lead scoring based on:\n  - Contact completeness\n  - Engagement level\n  - Project value potential\n  - Response time\n  - Number of interactions\n• Hot leads highlighted\n• Follow-up reminders auto-created\n• Behavior tracking" 
        },
        { 
          id: "communication", 
          title: "Client Communication", 
          content: "Manage all client communications from within InterioApp.\n\nEmail System:\n\nSending Emails:\n1. From Client Profile:\n   • Click 'Send Email' button\n   • Pre-fills client email address\n2. From Quote/Project:\n   • Click 'Email Quote' or 'Email Invoice'\n   • Auto-attaches relevant PDF\n3. Bulk Emailing:\n   • Select multiple clients\n   • Send group emails\n   • Personalization tokens (e.g., {client_name})\n\nEmail Features:\n• Professional email templates:\n  - Quote cover email\n  - Appointment confirmation\n  - Project updates\n  - Installation reminder\n  - Thank you / follow-up\n  - Payment reminder\n• Customizable templates\n• Your branding (logo, colors)\n• Email tracking:\n  - Delivery confirmation\n  - Open tracking (when client opens)\n  - Link click tracking\n  - Attachment view tracking\n• Attachment support (PDFs, images)\n• CC and BCC recipients\n• Email scheduling (send later)\n\nEmail Status Tracking:\n• Pending: Queued for sending\n• Sent: Successfully delivered\n• Delivered: Confirmed delivery\n• Opened: Client opened email\n• Clicked: Client clicked links\n• Failed: Delivery failed\n• Bounced: Email address invalid\n\nCommunication History:\n• All communications logged automatically\n• Searchable by keyword\n• Filter by type (email, call, meeting)\n• Export communication records\n• Add manual notes for phone calls\n\nPhone Call Logging:\n1. Click 'Log Call' in client profile\n2. Select call type:\n   • Outbound\n   • Inbound\n   • Missed\n3. Enter call notes\n4. Set follow-up reminder if needed\n5. Duration recorded\n\nAppointment Management:\n• Schedule from client profile\n• Types:\n  - Initial consultation\n  - Measurement visit\n  - Sample viewing\n  - Installation\n  - Follow-up inspection\n• Auto-email reminders\n• Calendar integration\n• Location tracking\n• Add team members\n\nAutomated Communications:\n• Quote sent confirmation\n• Appointment reminders (24hr and 1hr before)\n• Status update notifications\n• Payment reminders\n• Review requests\n• Birthday messages\n• Seasonal promotions\n\nCommunication Preferences:\n• Per-client settings:\n  - Preferred contact method\n  - Best time to contact\n  - Language preference\n  - Marketing opt-in/out\n• Respects do-not-contact flags\n• GDPR/privacy compliance\n\nTemplate Customization:\n1. Go to Settings > Communication Templates\n2. Edit existing templates or create new\n3. Use merge fields:\n   {client_name}\n   {company_name}\n   {quote_number}\n   {project_name}\n   {amount}\n   {due_date}\n4. Preview before sending\n5. Save as personal or company template" 
        },
        { 
          id: "funnel-management", 
          title: "Sales Funnel & Lead Stages", 
          content: "Track clients through your sales funnel with automated stage progression.\n\nFunnel Stages:\n\n1. Lead (Initial Contact)\n   • New inquiry received\n   • Contact information collected\n   • Not yet qualified\n   • Actions:\n     - Schedule initial consultation\n     - Send welcome email\n     - Research client needs\n\n2. Contacted (First Touch)\n   • Initial contact made\n   • Qualifying conversation completed\n   • Interest level determined\n   • Actions:\n     - Schedule measurement visit\n     - Send information pack\n     - Provide initial estimate\n\n3. Measuring Scheduled\n   • Appointment booked\n   • Site visit arranged\n   • Measurement date confirmed\n   • Actions:\n     - Send appointment confirmation\n     - Prepare measurement sheet\n     - Review property details\n\n4. Quoted (Proposal Sent)\n   • Formal quote provided\n   • Awaiting client decision\n   • Negotiation may be ongoing\n   • Actions:\n     - Follow up after 48hrs\n     - Answer questions\n     - Adjust quote if needed\n\n5. Negotiating\n   • Price discussion\n   • Terms being finalized\n   • Client comparing options\n   • Actions:\n     - Provide alternatives\n     - Justify value\n     - Close deal\n\n6. Approved (Won)\n   • Client accepted quote\n   • Deposit received\n   • Project starting\n   • Actions:\n     - Convert to project\n     - Order materials\n     - Schedule production\n\n7. In Progress\n   • Active project underway\n   • Manufacturing/installation\n   • Regular updates to client\n   • Actions:\n     - Update progress\n     - Send photos\n     - Coordinate installation\n\n8. Completed (Delivered)\n   • Project finished\n   • Client satisfied\n   • Final payment received\n   • Actions:\n     - Request review\n     - Ask for referrals\n     - Add to portfolio\n\n9. Lost (Closed Lost)\n   • Client declined\n   • Went with competitor\n   • Budget issues\n   • Actions:\n     - Request feedback\n     - Tag for future follow-up\n     - Learn from loss\n\nAutomatic Stage Progression:\n• Email sent → 'Contacted'\n• Appointment created → 'Measuring Scheduled'\n• Quote generated → 'Quoted'\n• Quote approved → 'Approved'\n• Project created → 'In Progress'\n• Project completed → 'Completed'\n\nManual Stage Updates:\n• Click stage indicator in client profile\n• Select new stage from dropdown\n• Add note explaining change\n• Stage history tracked\n\nFunnel Analytics:\n• Conversion rates per stage\n• Average time in each stage\n• Drop-off analysis\n• Win/loss ratios\n• Revenue by funnel stage\n• Stage velocity metrics\n\nFollow-up Automation:\n• Auto-schedule follow-ups:\n  - Lead: Follow up in 1 day\n  - Contacted: Follow up in 3 days\n  - Quoted: Follow up in 2 days\n  - Negotiating: Follow up in 1 day\n• Reminders appear in task list\n• Email templates for each stage\n• Customizable timing rules" 
        },
      ]
    },
    {
      id: "inventory",
      title: "Inventory Library",
      icon: Package,
      subsections: [
        { 
          id: "fabrics", 
          title: "Fabric Management", 
          content: "Comprehensive fabric inventory tracking system.\n\nAccessing Fabrics:\n• Navigate to Inventory tab\n• Click 'Fabrics' sub-tab\n• View all fabric inventory\n\nFabric Categories:\n• Curtain Fabrics\n• Sheer Fabrics\n• Blockout Fabrics\n• Lining Fabrics\n• Upholstery Fabrics\n• Outdoor Fabrics\n• Blind Fabrics (roller, roman)\n\nAdding New Fabrics:\n1. Click '+ Add Fabric'\n2. Enter Basic Information:\n   • SKU/Product Code (unique identifier)\n   • Fabric Name\n   • Collection/Range name\n   • Supplier\n   • Color/Pattern name\n\n3. Specifications:\n   • Width (typically 137cm, 300cm, etc.)\n   • Composition (e.g., 100% Polyester, Linen blend)\n   • Weight (grams per square meter)\n   • Pattern Repeat:\n     - Vertical repeat (cm)\n     - Horizontal repeat (cm)\n     - Pattern match type (straight, half-drop)\n   • Care Instructions\n   • Fire rating (if applicable)\n\n4. Pricing:\n   • Cost Price (per meter, what you pay supplier)\n   • Selling Price (per meter, what you charge)\n   • Markup % (auto-calculated)\n   • Minimum Order Quantity (MOQ)\n   • Lead Time (days)\n\n5. Stock Management:\n   • Current Stock Level (meters)\n   • Reorder Point (when to reorder)\n   • Reorder Quantity (how much to order)\n   • Location (warehouse location/bin)\n\n6. Visual & Documentation:\n   • Upload fabric swatch image\n   • Upload pattern/texture photo\n   • Attach supplier data sheets\n   • Add color codes (RAL, Pantone, etc.)\n\n7. Additional Settings:\n   • Active/Inactive status\n   • Featured (show in online store)\n   • Available for online quote calculator\n   • Tags (for filtering)\n   • Custom notes\n\nFabric Search & Filter:\n• Search by SKU, name, or supplier\n• Filter by:\n  - Category\n  - Supplier\n  - Color family\n  - Width\n  - In stock / Out of stock\n  - Price range\n• Sort by: Name, Price, Stock level, Supplier\n\nStock Tracking:\n• Automatic deduction when:\n  - Quote converts to project\n  - Materials allocated to job\n  - Manual stock adjustment\n• Stock history:\n  - All transactions logged\n  - Source (job number, adjustment reason)\n  - Quantity change\n  - Date/time stamp\n  - User who made change\n\nLow Stock Alerts:\n• System monitors stock levels\n• Alert when stock reaches reorder point\n• Email notifications\n• Reorder list in dashboard\n• Quick reorder from inventory screen\n\nBulk Operations:\n• Import fabrics from CSV/Excel\n• Export inventory to spreadsheet\n• Bulk price updates\n• Bulk status changes\n• Mass photo uploads\n\nFabric Usage Reports:\n• Most used fabrics\n• Least popular items\n• Stock value by supplier\n• Aging inventory (slow-moving)\n• Profitability by fabric\n• Meterage usage over time" 
        },
        { 
          id: "hardware", 
          title: "Hardware & Accessories", 
          content: "Manage curtain tracks, poles, blinds hardware, and accessories.\n\nHardware Categories:\n\n1. Curtain Tracks:\n   • Aluminum tracks\n   • PVC tracks\n   • Wave tracks\n   • Corded/uncorded\n   • Motorized track systems\n\n2. Curtain Poles & Rods:\n   • Wooden poles\n   • Metal poles (chrome, brass, black)\n   • Tension rods\n   • Bay window poles\n   • Traverse rods\n\n3. Brackets & Fittings:\n   • Wall brackets\n   • Ceiling brackets\n   • Center support brackets\n   • End caps and finials\n   • Brackets by weight capacity\n\n4. Blind Components:\n   • Roller blind mechanisms\n   • Roman blind systems\n   • Venetian blind headrails\n   • Vertical blind tracks\n   • Panel glide systems\n\n5. Curtain Accessories:\n   • Hooks and rings\n   • Gliders and carriers\n   • Tiebacks (fabric, rope, magnetic)\n   • Hold backs\n   • Weights and chains\n\n6. Installation Hardware:\n   • Screws and anchors\n   • Wall plugs\n   • Mounting plates\n   • Adhesive strips\n\n7. Motorization:\n   • Motors (battery, wired, solar)\n   • Remote controls\n   • Smart home integration\n   • Controllers and switches\n\nAdding Hardware Items:\n1. Navigate to Inventory > Hardware\n2. Click '+ Add Hardware'\n3. Enter Details:\n   • SKU/Product code\n   • Product name and description\n   • Category/Type\n   • Brand/Manufacturer\n   • Supplier\n\n4. Specifications:\n   • Dimensions (length, diameter, etc.)\n   • Color/Finish\n   • Material\n   • Weight capacity (if applicable)\n   • Compatible systems\n\n5. Pricing:\n   • Unit type (per item, per meter, per set)\n   • Cost price\n   • Sell price\n   • Quantity breaks (volume discounts)\n\n6. Stock:\n   • Quantity on hand\n   • Reorder level\n   • Location\n\n7. Images:\n   • Product photo\n   • Installation guide images\n   • Technical drawings\n\nHardware Ordering:\n• Quick reorder from stock screen\n• Generate purchase orders\n• Track deliveries\n• Receive stock (update quantities)\n• Partial deliveries handled\n\nCross-Selling Suggestions:\n• System suggests compatible items\n• E.g., select track → suggests brackets, gliders\n• Ensures all components ordered\n• Reduces installation delays\n\nInstallation Guides:\n• Attach PDF installation instructions\n• Link to video tutorials\n• Specification sheets\n• Available from hardware details" 
        },
        { 
          id: "templates", 
          title: "Treatment Templates", 
          content: "Pre-configured templates for common window treatments.\n\nTemplate System Overview:\nTemplates define:\n• Default measurements and calculations\n• Material requirements\n• Pricing formulas\n• Manufacturing specifications\n• Labor requirements\n\nAccessing Templates:\n• Navigate to Inventory > Templates\n• View all treatment types\n• Pre-loaded with industry standards\n\nTemplate Components:\n\n1. Basic Information:\n   • Template name\n   • Treatment category\n   • Curtain type\n   • Heading style\n   • Description\n\n2. Measurement Settings:\n   • Required dimensions\n   • Width measurement method\n   • Drop measurement method\n   • Allowances (hems, headings)\n\n3. Fabric Calculations:\n   • Fullness ratio (1.5x, 2x, 2.5x, etc.)\n   • Fabric direction (vertical, horizontal)\n   • Fabric width utilization\n   • Seam allowances\n   • Pattern repeat handling\n   • Cut drop calculations\n\n4. Hardware Requirements:\n   • Track/pole type\n   • Brackets per meter\n   • Accessories needed\n   • Installation components\n\n5. Pricing Structure:\n   • Pricing method:\n     - Per meter\n     - Per square meter\n     - Per panel\n     - Fixed price\n   • Labor pricing:\n     - Making charges\n     - Installation charges\n     - Per item or hourly\n\n6. Manufacturing:\n   • Manufacturing type (hand/machine)\n   • Production time estimate\n   • Special requirements\n   • Quality check points\n\nUsing Templates in Quotes:\n1. In quote builder, click 'Add Treatment'\n2. Select 'From Template'\n3. Choose template from list\n4. Enter window measurements\n5. System auto-calculates:\n   • Fabric meterage\n   • Hardware quantities\n   • Total pricing\n6. Customize if needed\n7. Add to quote\n\nCustomizing Templates:\n1. Open template for editing\n2. Modify any parameter\n3. Test with sample measurements\n4. Save changes or 'Save As' new template\n5. Set as active/inactive\n\nCreating Custom Templates:\n1. Click '+ New Template'\n2. Select treatment category\n3. Define all parameters\n4. Set calculation formulas\n5. Enter default pricing\n6. Test thoroughly\n7. Activate for use\n\nTemplate Categories:\n• Curtains (pinch pleat, eyelet, tab top, etc.)\n• Sheers\n• Blinds (roller, roman, venetian, vertical)\n• Panel glides\n• Shutters\n• Awnings\n• Specialty treatments\n\nSharing Templates:\n• Export templates\n• Import from suppliers\n• Share within team\n• Company-wide standards" 
        },
        { 
          id: "vendors", 
          title: "Supplier & Vendor Management", 
          content: "Maintain relationships with your suppliers and vendors.\n\nAdding Suppliers:\n1. Navigate to Inventory > Vendors\n2. Click '+ Add Vendor'\n3. Enter Information:\n   • Company name\n   • Contact person\n   • Email and phone\n   • Website\n   • Physical address\n   • Tax ID / ABN\n\n4. Business Terms:\n   • Payment terms (Net 30, Net 60, COD, etc.)\n   • Minimum order value\n   • Delivery charges\n   • Freight terms\n   • Account number with supplier\n\n5. Delivery Information:\n   • Standard lead times\n   • Cut-off times for orders\n   • Delivery days\n   • Express options\n   • Delivery areas\n\n6. Product Categories:\n   • What they supply (fabrics, hardware, etc.)\n   • Primary supplier (yes/no)\n   • Quality rating\n   • Preferred supplier\n\nSupplier Portal Integration:\n• Some suppliers offer API integration\n• Connect to supplier systems:\n  - Real-time stock availability\n  - Auto-updated pricing\n  - Electronic order submission\n  - Delivery tracking\n  - Invoice downloads\n\nOrdering from Suppliers:\n\nManual Purchase Orders:\n1. Navigate to Ordering Hub\n2. Select supplier\n3. Add items to order:\n   • Browse supplier catalog\n   • Enter quantities\n   • System shows:\n     - Unit prices\n     - Total cost\n     - Required for jobs\n4. Review order\n5. Submit:\n   • Email to supplier\n   • Print PO\n   • Export to their system\n\nAutomatic Reordering:\n• System suggests items to reorder\n• Based on:\n  - Stock below reorder point\n  - Materials needed for active jobs\n  - Historical usage patterns\n• One-click reorder\n• Groups by supplier automatically\n\nReceiving Stock:\n1. Order delivered\n2. Open purchase order\n3. Mark items as received:\n   • Full delivery or partial\n   • Enter received quantities\n   • Note any discrepancies\n4. System updates:\n   • Inventory quantities\n   • Purchase order status\n   • Job availability\n   • Reorder alerts\n\nSupplier Performance:\nTrack and compare suppliers:\n• Delivery reliability\n• Order accuracy\n• Lead time consistency\n• Quality issues\n• Pricing competitiveness\n• Response time\n• Overall rating\n\nSupplier Documents:\n• Store important documents:\n  - Price lists\n  - Product catalogs\n  - Fabric swatch cards\n  - Technical specifications\n  - Terms and conditions\n  - Insurance certificates\n  - Quality assurance docs\n\nCommunication History:\n• All supplier communications logged\n• Email correspondence\n• Phone call notes\n• Meeting records\n• Issues and resolutions\n\nPreferred Suppliers:\n• Mark suppliers as preferred\n• System prioritizes in selection\n• Quick access to top suppliers\n• Better pricing and terms" 
        },
        { 
          id: "stock-tracking", 
          title: "Stock Tracking & Inventory Control", 
          content: "Real-time inventory management and stock control.\n\nStock Tracking Features:\n\n1. Real-time Updates:\n   • Stock levels update automatically when:\n     - Materials allocated to jobs\n     - Purchase orders received\n     - Stock adjustments made\n     - Returns processed\n   • Accurate stock counts at all times\n\n2. Stock Locations:\n   • Multiple warehouse locations\n   • Bin/shelf locations within warehouse\n   • Van/vehicle stock\n   • Offsite storage\n   • Track location of each item\n\n3. Stock Movements:\n   All movements logged:\n   • Date and time\n   • Item and quantity\n   • Movement type:\n     - Received (from supplier)\n     - Allocated (to job)\n     - Returned (from job)\n     - Adjusted (count correction)\n     - Transferred (between locations)\n     - Consumed (used/installed)\n     - Damaged/Disposed\n   • Source/destination\n   • User who performed action\n   • Reference (PO number, job number)\n\n4. Low Stock Alerts:\n   • Configure reorder points per item\n   • Alerts appear:\n     - Dashboard widget\n     - Email notifications\n     - Mobile notifications\n   • Suggested reorder quantities\n   • One-click reorder\n\n5. Stock Valuation:\n   • Total stock value\n   • Value by category\n   • Value by supplier\n   • Cost vs. retail value\n   • Profit potential\n\n6. Stock Allocation:\n   When quote converts to project:\n   • System checks stock availability\n   • Allocates materials to job\n   • Reserves stock (not available for other jobs)\n   • Updates available quantities\n   • Creates picking list\n\n7. Stock Adjustments:\n   For corrections:\n   1. Select item\n   2. Click 'Adjust Stock'\n   3. Enter:\n      - New quantity OR\n      - Adjustment amount (+/-)\n   4. Select reason:\n      - Physical count correction\n      - Damaged goods\n      - Sample used\n      - Theft/loss\n      - Other (with note)\n   5. Save adjustment\n   6. Audit trail created\n\n8. Stocktake Process:\n   • Generate stocktake sheet\n   • Print or use mobile app\n   • Count physical stock\n   • Enter actual quantities\n   • System compares to records\n   • Shows discrepancies\n   • Adjust and explain variances\n\n9. Stock Reports:\n   • Current stock levels\n   • Stock movements (date range)\n   • Stock valuation\n   • Aging inventory\n   • Fast/slow moving items\n   • Reorder requirements\n   • Stock accuracy\n   • Shrinkage report\n\n10. Batch/Lot Tracking:\n    • Track fabric by batch/dye lot\n    • Ensure color consistency\n    • Match lots for large orders\n    • Trace quality issues\n\nMinimum Stock Levels:\n• Set per item\n• Based on:\n  - Lead time\n  - Usage rate\n  - Safety stock\n• Automatic alerts\n• Prevent stockouts\n\nMaximum Stock Levels:\n• Avoid overstock\n• Reduce capital tied up\n• Minimize storage costs\n• Alert if ordering too much\n\nStock Transfer:\nBetween locations:\n1. Select items to transfer\n2. Choose destination\n3. Create transfer order\n4. Physical move\n5. Confirm receipt\n6. Stock updated both locations\n\nReturns Management:\n• Return materials from jobs\n• Reason codes\n• Condition assessment\n• Restock or dispose\n• Update stock quantities\n• Credit to job if applicable" 
        },
        { 
          id: "import-export", 
          title: "Bulk Import & Export", 
          content: "Efficiently manage large amounts of inventory data.\n\nImporting Inventory:\n\n1. Prepare Import File:\n   • Use CSV or Excel format\n   • Download template from system:\n     - Inventory > Import > Download Template\n   • Required columns:\n     - SKU (unique)\n     - Name\n     - Category\n     - Supplier\n     - Cost price\n     - Sell price\n   • Optional columns:\n     - Description\n     - Specifications\n     - Stock quantity\n     - Reorder point\n     - Dimensions\n     - Images (file paths)\n     - Tags\n     - Custom fields\n\n2. Import Process:\n   • Navigate to Inventory > Import\n   • Click 'Choose File'\n   • Select your CSV/Excel file\n   • Map columns:\n     - System auto-detects if using template\n     - Manually map if different format\n   • Preview import:\n     - See first 10 rows\n     - Check for errors\n     - Validation warnings shown\n   • Choose import mode:\n     - Create new items only\n     - Update existing items\n     - Create and update (upsert)\n   • Start import\n   • Progress bar shows status\n   • Import summary:\n     - Items created\n     - Items updated\n     - Errors/warnings\n     - Failed rows with reasons\n\n3. Import Validation:\n   System checks:\n   • Required fields present\n   • Data types correct\n   • SKUs unique (for new items)\n   • Prices are numbers\n   • Categories exist\n   • Suppliers exist\n   • Stock quantities non-negative\n\n4. Error Handling:\n   • Rows with errors skipped\n   • Error report generated\n   • Fix errors in spreadsheet\n   • Re-import failed rows only\n\nExporting Inventory:\n\n1. Export Options:\n   • Full inventory\n   • Filtered selection\n   • Current view\n   • Selected items only\n\n2. Export Formats:\n   • CSV (for Excel/Google Sheets)\n   • Excel (.xlsx)\n   • PDF (for printing)\n   • JSON (for developers)\n\n3. Export Process:\n   • Navigate to Inventory\n   • Apply filters if needed\n   • Click 'Export' button\n   • Choose format\n   • Select fields to include:\n     - All fields\n     - Standard fields\n     - Custom selection\n   • Include images:\n     - Image URLs\n     - Download images as ZIP\n   • Click 'Download'\n\n4. Scheduled Exports:\n   • Auto-export on schedule:\n     - Daily, weekly, monthly\n   • Email to recipients\n   • FTP upload\n   • Sync with accounting software\n\nSupplier Data Import:\n• Many suppliers provide data feeds\n• Import supplier catalogs:\n  - Pricing updates\n  - New products\n  - Stock availability\n  - Specifications\n• Auto-update pricing\n• Add new items automatically\n• Sync with supplier systems\n\nBulk Updates:\n• Export current inventory\n• Modify in spreadsheet:\n  - Update prices\n  - Change categories\n  - Update stock\n  - Add images\n• Re-import to update\n• Faster than individual updates\n\nBackup & Restore:\n• Regular exports as backup\n• Restore from export file\n• Disaster recovery\n• Data migration\n• Testing environments\n\nIntegration:\n• Import from:\n  - Accounting software\n  - Previous systems\n  - Supplier catalogs\n  - E-commerce platforms\n• Export to:\n  - Accounting systems\n  - Online stores\n  - Price lists\n  - Marketing materials" 
        },
      ]
    },
    {
      id: "online-store",
      title: "Online Store",
      icon: ShoppingCart,
      subsections: [
        { 
          id: "store-setup", 
          title: "Shopify Store Integration", 
          content: "InterioApp integrates with Shopify to power your online presence and e-commerce capabilities.\n\nShopify Integration Features:\n\n1. Two Integration Options:\n   \n   A. Connect Existing Store:\n   • Link your current Shopify store\n   • Sync products and inventory\n   • Two-way data synchronization\n   • Maintain your existing storefront\n   • Use InterioApp to manage backend\n   • All changes sync to live store\n   \n   B. Create New Store:\n   • Lovable creates development store\n   • Free development environment\n   • Build and test before going live\n   • No upfront costs during development\n   • Claim store when ready to sell\n   • 30-day free trial on claim\n   • Requires paid Shopify plan after trial\n\n2. Setting Up Integration:\n   • Navigate to Inventory > Online Store\n   • Click 'Connect to Shopify' or 'Create Store'\n   • For existing store:\n     - Enter Shopify admin URL\n     - Authorize access\n     - Configure sync settings\n   • For new store:\n     - Name your store\n     - Select country/region\n     - Choose currency\n     - Store created automatically\n\n3. Product Synchronization:\n   \n   InterioApp to Shopify:\n   • Sync inventory items to Shopify products:\n     - Fabrics\n     - Ready-made curtains\n     - Hardware\n     - Accessories\n   • Configure which items to sync\n   • Set online/offline status per item\n   • Automatic price updates\n   • Stock level synchronization\n   • Product variants (colors, sizes)\n   • Images and descriptions\n   \n   Shopify to InterioApp:\n   • Orders automatically create jobs\n   • Customer data syncs to clients\n   • Order status updates\n   • Inventory deductions\n   • Payment tracking\n\n4. Product Management:\n   \n   From InterioApp:\n   • Mark inventory items as 'Featured'\n   • Set online visibility (show/hide)\n   • Configure product details:\n     - Title and description\n     - Pricing\n     - Images (multiple)\n     - SEO settings\n     - Product categories\n   • Manage variants:\n     - Colors\n     - Sizes\n     - Materials\n   • Set stock quantities\n   • Enable/disable items\n   \n   Bulk Operations:\n   • Publish multiple items at once\n   • Update prices in bulk\n   • Sync all inventory\n   • Import/export product data\n\n5. Order Processing:\n   \n   When Order Received:\n   • Notification in InterioApp\n   • Auto-creates client record\n   • Creates project/quote\n   • Reserves inventory\n   • Shows order details:\n     - Items ordered\n     - Quantities\n     - Shipping address\n     - Payment status\n     - Customer notes\n   • Tracking status updates:\n     - New Order\n     - Processing\n     - Ready to Ship\n     - Shipped\n     - Delivered\n     - Completed\n   \n   Fulfillment:\n   • Mark orders as fulfilled in InterioApp\n   • Updates Shopify automatically\n   • Sends tracking to customer\n   • Reduces inventory\n   • Updates job status\n\n6. Store Analytics:\n   • View in Inventory > Online Store > Analytics\n   • Metrics tracked:\n     - Total sales (daily, weekly, monthly)\n     - Number of orders\n     - Average order value\n     - Top selling products\n     - Conversion rate\n     - Traffic sources\n     - Customer acquisition\n   • Date range filters\n   • Export reports\n   • Compare periods\n\n7. Store Management:\n   • Access Shopify admin directly\n   • Manage store settings\n   • Configure payment methods\n   • Set up shipping zones and rates\n   • Tax settings\n   • Domain configuration\n   • Theme customization\n   • App integrations\n\n8. Important Considerations:\n   \n   For Existing Stores:\n   • Changes made in InterioApp affect live store immediately\n   • Test changes carefully\n   • Requires user confirmation for critical actions\n   • Can disconnect and reconnect anytime\n   \n   For New Development Stores:\n   • Free to develop and test\n   • Cannot process real payments until claimed\n   • Test orders only during development\n   • When ready to sell:\n     - Prompt 'Claim Store' in InterioApp\n     - Starts 30-day free trial\n     - Requires paid Shopify subscription after trial\n   • Can continue using InterioApp after claiming\n\n9. Best Practices:\n   • Keep inventory synced regularly\n   • Use high-quality product images\n   • Write detailed product descriptions\n   • Set accurate stock levels\n   • Process orders promptly\n   • Monitor analytics regularly\n   • Respond to customer inquiries quickly\n   • Update product availability" 
        },
        { 
          id: "product-visibility", 
          title: "Product Display & Visibility Control", 
          content: "Control which inventory items appear on your online store and how they're displayed.\n\nVisibility Settings:\n\n1. Per-Item Control:\n   • Navigate to Inventory\n   • Select any item (fabric, hardware, etc.)\n   • Toggle 'Show in Store' option\n   • Options:\n     - Online: Visible on store\n     - Offline: Hidden from customers\n     - Draft: Hidden, preparing for launch\n\n2. Featured Products:\n   • Mark items as 'Featured'\n   • Appear on homepage/featured sections\n   • Get priority placement\n   • Higher visibility in search\n   • Can set featured order/priority\n\n3. Product Categories:\n   • Organize by category:\n     - Curtains & Drapes\n     - Blinds & Shades\n     - Hardware & Accessories\n     - Wallcoverings\n     - Custom Collections\n   • Category-based navigation\n   • Filter and sort options\n   • Category descriptions and images\n\n4. Product Display Options:\n   \n   Product Cards Show:\n   • Product image (primary)\n   • Product name\n   • Price (or price range for variants)\n   • Short description\n   • 'In Stock' or 'Out of Stock' badge\n   • Quick view button\n   • Add to cart button\n   \n   Product Detail Page Shows:\n   • Image gallery (multiple views)\n   • Full description\n   • Specifications\n   • Pricing\n   • Variants selector (color, size, etc.)\n   • Quantity selector\n   • Stock availability\n   • Shipping information\n   • Related products\n   • Customer reviews (if enabled)\n\n5. Custom Collections:\n   • Create themed collections:\n     - Seasonal collections\n     - Sale items\n     - New arrivals\n     - Best sellers\n     - Room type collections\n     - Style collections (modern, traditional, etc.)\n   • Manual or automatic:\n     - Manual: Select specific products\n     - Automatic: Set rules (e.g., all items tagged 'summer')\n   • Collection landing pages\n   • Promotional banners\n\n6. Pricing Display:\n   • Show retail prices\n   • Optional: Compare at price (was/now)\n   • Price ranges for variants\n   • Sale pricing with % off\n   • Bulk pricing tiers (if applicable)\n   • Hide trade/cost prices from public\n\n7. Stock Display:\n   • Show stock status:\n     - In Stock\n     - Low Stock (configurable threshold)\n     - Out of Stock\n     - Pre-order\n     - Made to Order\n   • Optional: Show quantity available\n   • Notify when back in stock\n   • Estimated delivery times\n\n8. SEO & Discoverability:\n   • Product meta titles\n   • Meta descriptions\n   • URL handles (clean URLs)\n   • Alt text for images\n   • Product tags/keywords\n   • Schema markup (automatic)\n\n9. Seasonal & Promotional:\n   • Schedule visibility:\n     - Set publish date/time\n     - Set unpublish date/time\n   • Seasonal availability\n   • Flash sales\n   • Limited time offers\n   • Countdown timers\n\n10. Trade vs. Retail Pricing:\n    • Different price tiers:\n      - Retail (public customers)\n      - Trade (registered designers)\n      - Wholesale (bulk buyers)\n    • Login-gated pricing\n    • Approval required for trade accounts\n    • Automatic discounts by customer type" 
        },
        { 
          id: "inquiries", 
          title: "Quote Requests & Customer Inquiries", 
          content: "Manage customer inquiries and quote requests from your online store.\n\nQuote Request System:\n\n1. Quote Request Form:\n   • Customers can request custom quotes\n   • Located on:\n     - Product pages (for custom sizing)\n     - Dedicated quote page\n     - Contact forms\n   • Form captures:\n     - Customer details (name, email, phone)\n     - Product of interest\n     - Measurements/specifications\n     - Quantity required\n     - Installation needed (yes/no)\n     - Project timeline\n     - Additional notes\n     - Photo uploads (optional)\n\n2. Inquiry Notifications:\n   • Email notification to you\n   • Shows in InterioApp dashboard\n   • Appears in 'Quote Requests' section\n   • Mobile push notification\n   • Urgency indicators\n\n3. Processing Quote Requests:\n   \n   From Store Inquiry to Quote:\n   • View inquiry in InterioApp\n   • Customer auto-created in CRM\n   • Click 'Create Quote from Inquiry'\n   • Pre-filled information:\n     - Customer details\n     - Products requested\n     - Measurements (if provided)\n     - Notes and requirements\n   • Complete quote as normal:\n     - Add/adjust treatments\n     - Calculate pricing\n     - Add recommendations\n     - Include alternatives\n   • Send quote to customer:\n     - Professional PDF\n     - Branded email\n     - Approval link\n     - Valid for X days\n\n4. Follow-up Workflow:\n   • Automatic follow-up reminders:\n     - 24 hours after inquiry\n     - 48 hours if no response\n     - 1 week reminder\n   • Track inquiry status:\n     - New (unread)\n     - Viewed\n     - Quote Sent\n     - Awaiting Response\n     - Accepted\n     - Declined\n     - Expired\n   • Communication history logged\n\n5. Customer Portal:\n   • Customers can:\n     - View quote status\n     - Accept/decline online\n     - Request modifications\n     - Upload additional photos\n     - Schedule measurements\n     - Track order progress\n   • Secure access link\n   • No login required initially\n   • Optional account creation\n\n6. Inquiry Analytics:\n   • Track metrics:\n     - Number of inquiries per day/week\n     - Response time (yours)\n     - Quote acceptance rate\n     - Average quote value\n     - Conversion rate\n     - Peak inquiry times\n     - Popular products requested\n   • Identify trends\n   • Optimize response strategy\n\n7. Automated Responses:\n   • Instant confirmation email\n   • Expected response time notification\n   • Business hours message\n   • FAQ auto-responses\n   • Availability calendars\n\n8. Priority Management:\n   • Flag high-value inquiries\n   • VIP customer detection\n   • Repeat customer identification\n   • Lead scoring integration\n   • Urgent tag for time-sensitive requests\n\n9. Team Assignment:\n   • Route inquiries by:\n     - Product type\n     - Location/region\n     - Designer preference\n     - Workload balancing\n   • Notify assigned team member\n   • Track response times per person\n\n10. Measurement Scheduling:\n    • Book measurement visits from inquiry\n    • Send appointment confirmation\n    • Calendar integration\n    • SMS/email reminders\n    • Reschedule options\n\n11. Quote Templates:\n    • Pre-built responses for common scenarios:\n      - Standard curtains quote\n      - Blind installation quote\n      - Minimum order values\n      - Custom work pricing\n    • Personalize before sending\n    • Include photos and references\n\n12. Integration Features:\n    • CRM auto-update\n    • Lead tracking\n    • Marketing attribution\n    • Sales funnel tracking\n    • Google Analytics events\n    • Facebook Pixel integration" 
        },
      ]
    },
    {
      id: "calendar",
      title: "Calendar & Appointments",
      icon: Calendar,
      subsections: [
        { 
          id: "calendar-view", 
          title: "Calendar Management & Views", 
          content: "Comprehensive calendar system for managing appointments, deadlines, and team schedules.\n\nAccessing Calendar:\n• Click 'Calendar' in main navigation\n• Shows current month by default\n• Quick navigation to today\n• Search appointments\n\nCalendar Views:\n\n1. Month View:\n   • Full month display\n   • Shows all appointments\n   • Color-coded by type\n   • Day cells show:\n     - Number of appointments\n     - Time indicators\n     - Status badges\n   • Click any date to see details\n   • Drag dates to create appointment\n\n2. Week View:\n   • 7-day view with time slots\n   • Hourly breakdown (8am-6pm default)\n   • Expand hours if needed\n   • Shows appointment duration blocks\n   • Drag to resize appointments\n   • Drag to move appointments\n   • Color-coded by type\n\n3. Day View:\n   • Single day detailed view\n   • 30-minute time slots\n   • Full appointment details visible\n   • Quick add at any time slot\n   • Shows conflicts immediately\n   • Today's agenda summary\n\n4. Agenda View:\n   • List of upcoming appointments\n   • Chronological order\n   • Next 30/60/90 days\n   • Filterable by type\n   • Sortable columns\n   • Quick actions for each\n\nCalendar Navigation:\n• Today button (quick return to today)\n• Previous/Next arrows\n• Month/Year picker\n• Jump to date function\n• Keyboard shortcuts:\n  - Arrow keys: Navigate days\n  - T: Today\n  - M: Month view\n  - W: Week view\n  - D: Day view\n\nFiltering & Search:\n• Filter by:\n  - Appointment type\n  - Client\n  - Team member\n  - Location\n  - Status\n• Search by:\n  - Client name\n  - Appointment title\n  - Location\n  - Notes content\n• Save filter presets\n• Quick filters:\n  - My appointments\n  - Team appointments\n  - This week\n  - Unconfirmed\n\nColor Coding:\n• Appointment types have colors:\n  - Initial Consultation (blue)\n  - Measurement Visit (green)\n  - Sample Viewing (purple)\n  - Installation (orange)\n  - Follow-up (yellow)\n  - Internal Meeting (gray)\n• Status indicators:\n  - Confirmed: Solid color\n  - Tentative: Striped pattern\n  - Cancelled: Red strikethrough\n  - Completed: Checkmark\n\nCalendar Sync:\n• Export to:\n  - Google Calendar\n  - Apple Calendar\n  - Outlook\n  - iCal format (.ics)\n• Two-way sync (if connected)\n• Subscribe to calendar feed\n• Individual appointment export\n\nPrinting:\n• Print month/week/day view\n• Print appointment list\n• Customize print layout\n• Include/exclude details\n• PDF export option" 
        },
        { 
          id: "scheduling", 
          title: "Creating & Managing Appointments", 
          content: "Complete appointment scheduling system with automation and reminders.\n\nCreating Appointments:\n\n1. Quick Create:\n   • Click any date/time on calendar\n   • Click '+ New Appointment' button\n   • From client profile > Schedule Appointment\n   • From job > Add Appointment\n\n2. Appointment Details Form:\n   \n   Required Information:\n   • Title/Type:\n     - Initial Consultation\n     - Measurement Visit\n     - Sample Showing\n     - Installation\n     - Follow-up Visit\n     - Custom title\n   \n   • Client Selection:\n     - Search existing clients\n     - Or create new client\n     - Shows client contact info\n     - Links to client profile\n   \n   • Date & Time:\n     - Date picker\n     - Start time\n     - Duration (15 min - 8 hours)\n     - Or end time\n     - System checks conflicts\n     - Shows team availability\n   \n   • Location:\n     - Office\n     - Client address (auto-filled)\n     - Custom address\n     - Virtual/Video call\n     - Phone call\n   \n   Optional Information:\n   • Team Members:\n     - Assign multiple people\n     - Shows their availability\n     - Sends them notifications\n   \n   • Description/Notes:\n     - Appointment purpose\n     - Special requirements\n     - Materials to bring\n     - Access instructions\n   \n   • Job Link:\n     - Link to existing quote/project\n     - Auto-creates if needed\n   \n   • Reminders:\n     - Email reminders\n     - SMS reminders (if enabled)\n     - Notification timing:\n       * 24 hours before\n       * 1 hour before\n       * At appointment time\n     - Custom reminder times\n   \n   • Video Meeting:\n     - Generate Google Meet link\n     - Or paste custom meeting link\n     - Zoom, Teams, etc.\n   \n   • Status:\n     - Tentative (not confirmed)\n     - Confirmed\n     - In Progress\n     - Completed\n     - Cancelled\n     - No-show\n\n3. Recurring Appointments:\n   • Repeat options:\n     - Daily\n     - Weekly (select days)\n     - Monthly (specific date or day)\n     - Custom pattern\n   • End conditions:\n     - After X occurrences\n     - By specific date\n     - Never (ongoing)\n   • Edit series or single instance\n\n4. Appointment Actions:\n   \n   From Calendar:\n   • Click appointment to view\n   • Quick actions:\n     - Edit details\n     - Reschedule (drag & drop)\n     - Mark as completed\n     - Cancel appointment\n     - Send reminder now\n     - Add notes\n     - Start video call\n     - Navigate to address\n   \n   Bulk Actions:\n   • Select multiple appointments\n   • Reschedule all\n   • Reassign team member\n   • Send bulk reminder\n   • Export selection\n\n5. Conflict Detection:\n   • Warns if team member double-booked\n   • Shows travel time conflicts\n   • Client double-booking alert\n   • Suggests alternative times\n\n6. Buffer Time:\n   • Set before/after appointments\n   • Travel time calculation\n   • Setup/cleanup time\n   • Automatic in scheduling\n\n7. Appointment Status Updates:\n   \n   Lifecycle:\n   • Created → Tentative\n   • Client confirms → Confirmed\n   • Team arrives → In Progress\n   • Work done → Completed\n   • If needed → Rescheduled/Cancelled\n   \n   Each status change:\n   • Logs timestamp\n   • Records who changed it\n   • Optional notes\n   • Triggers automation\n   • Updates client\n\n8. No-Show Handling:\n   • Mark appointment as no-show\n   • Auto-creates follow-up task\n   • Sends follow-up email\n   • Flag in client record\n   • Optional cancellation fee\n\n9. Completion Checklist:\n   • Mark appointment complete\n   • Optional checklist:\n     - Photos taken ✓\n     - Measurements recorded ✓\n     - Quote sent ✓\n     - Next steps scheduled ✓\n   • Automatic activity log entry\n   • Trigger next action\n\n10. Appointment History:\n    • View all past appointments\n    • Filter by client/date/type\n    • Completion rate stats\n    • Average duration\n    • No-show rate" 
        },
        { 
          id: "notifications", 
          title: "Appointment Reminders & Notifications", 
          content: "Automated notification system keeps everyone informed and on schedule.\n\nAutomatic Reminders:\n\n1. Email Reminders:\n   \n   To Clients:\n   • Appointment confirmation (immediately)\n   • 24-hour reminder (day before)\n   • 1-hour reminder (before appointment)\n   • Post-appointment follow-up\n   • Reschedule notifications\n   • Cancellation confirmation\n   \n   Email Content Includes:\n   • Appointment details\n   • Date, time, duration\n   • Location/address with map link\n   • Video meeting link (if applicable)\n   • Team member name(s)\n   • What to prepare\n   • How to reschedule/cancel\n   • Company contact info\n   • Calendar file attachment (.ics)\n\n2. SMS Reminders:\n   (If SMS service configured)\n   • Text message reminders\n   • Same timing as emails\n   • Brief format\n   • Click-to-call number\n   • Link to reschedule\n   • Two-way SMS (reply to confirm)\n\n3. Team Notifications:\n   \n   In-App Notifications:\n   • New appointment assigned\n   • Appointment time approaching\n   • Client confirmed/cancelled\n   • Appointment details changed\n   • Running late alert\n   \n   Email to Team:\n   • Daily schedule digest\n   • New appointments\n   • Changes to schedule\n   • Cancellations\n   \n   Mobile Push:\n   • Real-time alerts\n   • Time to leave reminder\n   • Client arrived notification\n\n4. Notification Settings:\n   \n   Per User:\n   • Navigate to Settings > Notifications\n   • Enable/disable by type:\n     - New appointments\n     - Reminders\n     - Changes\n     - Cancellations\n   • Notification methods:\n     - In-app\n     - Email\n     - SMS\n     - Push\n   • Notification timing:\n     - Custom reminder times\n     - Business hours only\n     - Quiet hours\n   • Digest options:\n     - Daily summary\n     - Weekly overview\n\n5. Client Preferences:\n   • Set per client:\n     - Preferred notification method\n     - Do not disturb hours\n     - Reminder frequency\n   • Language preference\n   • Time zone\n\n6. Confirmation Requests:\n   • Auto-send confirmation requests\n   • Client clicks link to confirm\n   • Tracks confirmation status\n   • Follow up if not confirmed\n   • Reminds X days before\n\n7. Running Late Alerts:\n   • Team can send 'running late' notification\n   • Updated ETA\n   • Apology message\n   • Client instantly notified\n   • Option to reschedule\n\n8. Cancellation Notifications:\n   • Immediate notification when cancelled\n   • By whom (client or team)\n   • Cancellation reason\n   • Rescheduling options\n   • Cancellation policy reminder\n\n9. Weather Alerts:\n   (Optional integration)\n   • Severe weather notifications\n   • Suggests rescheduling\n   • Safety first approach\n   • Automatic alerts for outdoor appointments\n\n10. Automation Rules:\n    Create custom rules:\n    • If appointment type = Installation\n      Then: Send detailed instructions 24hrs before\n    • If client confirms\n      Then: Send team notification\n    • If appointment not confirmed 48hrs before\n      Then: Send follow-up request\n    • If completed\n      Then: Send feedback request" 
        },
        { 
          id: "video-meetings", 
          title: "Virtual Appointments & Video Calls", 
          content: "Built-in support for virtual consultations and remote appointments.\n\nVideo Meeting Integration:\n\n1. Supported Platforms:\n   • Google Meet (integrated)\n   • Zoom (paste link)\n   • Microsoft Teams (paste link)\n   • Custom video platforms\n   • Phone calls\n\n2. Google Meet Integration:\n   \n   Automatic Setup:\n   • When creating appointment\n   • Select location: 'Video Call'\n   • System auto-generates Google Meet link\n   • Link included in:\n     - Appointment details\n     - Confirmation email\n     - Reminder emails\n     - Calendar invite\n   \n   One-Click Join:\n   • Click link in appointment\n   • Opens Google Meet in browser\n   • No app installation required\n   • Works on desktop and mobile\n\n3. Other Platforms:\n   • Paste your meeting link:\n     - Zoom meeting URL\n     - Teams meeting link\n     - Any video platform link\n   • Link sent to client automatically\n   • Included in all communications\n\n4. Virtual Consultation Features:\n   \n   Pre-Meeting:\n   • Send preparation checklist:\n     - Measure windows\n     - Take photos\n     - Prepare questions\n     - Upload images beforehand\n   • Tech check reminder\n   • Test video/audio link\n   \n   During Meeting:\n   • Access client info in InterioApp\n   • View uploaded photos/documents\n   • Screen sharing capability\n   • Take notes in appointment\n   • Create quote during call\n   • Send documents live\n   \n   Post-Meeting:\n   • Meeting notes auto-saved\n   • Follow-up tasks created\n   • Send summary email\n   • Quote sent immediately\n   • Schedule next appointment\n\n5. Screen Sharing:\n   • Show fabric samples digitally\n   • Review measurements together\n   • Walk through quote\n   • Demonstrate products\n   • Show installation process\n\n6. Photo Sharing:\n   • Clients upload photos before call\n   • Visible during consultation\n   • Annotate photos together\n   • Save to client record\n   • Use in quote/project\n\n7. Recording (if enabled):\n   • Record consultations\n   • Client consent required\n   • Stored securely\n   • Accessible from appointment\n   • Useful for:\n     - Training\n     - Documentation\n     - Reference\n     - Measurements verification\n\n8. Virtual Showroom:\n   • Share screen to show:\n     - Digital fabric library\n     - 3D room visualizations\n     - Style inspiration\n     - Previous projects\n     - Product demonstrations\n\n9. Mobile Friendly:\n   • Clients can join from phone/tablet\n   • No app download required\n   • Responsive design\n   • Good for on-site consultations\n\n10. Best Practices:\n    • Test link before appointment\n    • Send link 24hrs and 1hr before\n    • Have backup (phone number)\n    • Good lighting and audio\n    • Professional background\n    • Have samples ready to show\n    • Screen sharing capability\n    • Follow up with written summary" 
        },
      ]
    },
    {
      id: "team",
      title: "Team & Permissions",
      icon: Shield,
      subsections: [
        { 
          id: "roles", 
          title: "User Roles & Access Levels", 
          content: "InterioApp uses a role-based permission system to control access and capabilities.\n\nBuilt-in User Roles:\n\n1. Owner (Full Control):\n   • Complete access to everything\n   • Only one owner per account\n   • Cannot be removed\n   • Capabilities:\n     - All system functions\n     - User management\n     - Billing and subscriptions\n     - Delete account\n     - Transfer ownership\n     - View all data\n     - Modify all settings\n\n2. Admin (Management):\n   • Nearly full access\n   • Manage most settings\n   • User management\n   • Cannot:\n     - Delete account\n     - Change owner\n     - View/change billing\n   • Capabilities:\n     - Create/edit/delete jobs\n     - Manage all clients\n     - Full inventory access\n     - Team management\n     - View all reports\n     - System settings\n     - Integration configuration\n\n3. Manager (Operations):\n   • Day-to-day operations\n   • Full project management\n   • Limited settings access\n   • Capabilities:\n     - Create and manage jobs\n     - All client interactions\n     - View cost prices\n     - Inventory management\n     - Team scheduling\n     - View reports\n     - Cannot:\n       * Add/remove users\n       * Change system settings\n       * Access billing\n\n4. Staff (Operations Team):\n   • Project execution focus\n   • View assigned work\n   • Limited editing\n   • Capabilities:\n     - View all jobs\n     - View client details\n     - Update job status\n     - Add notes and comments\n     - View inventory\n     - Manage appointments\n     - Cannot:\n       * Create new jobs\n       * Delete jobs\n       * See cost prices\n       * Manage inventory\n       * Access reports\n\n5. User (Basic Access):\n   • Read-only by default\n   • View assigned items only\n   • Minimal permissions\n   • Used for:\n     - Apprentices\n     - Subcontractors\n     - Limited team members\n   • Capabilities:\n     - View assigned jobs\n     - View basic client info\n     - Add time entries\n     - Upload photos\n     - Cannot modify data\n\nRole Assignment:\n• Navigate to Settings > Team & Permissions\n• View all team members\n• Click member to edit\n• Select role from dropdown\n• Confirm change\n• User immediately updated\n• Notification sent to user\n\nRole Hierarchy:\n• Owner > Admin > Manager > Staff > User\n• Higher roles can manage lower roles\n• Cannot manage peers or higher\n• Owner can manage everyone\n\nDefault Permissions Per Role:\n(Automatically assigned)\n• Each role has preset permissions\n• Can be customized if needed\n• See 'Permission Management' section" 
        },
        { 
          id: "permissions", 
          title: "Granular Permission Control", 
          content: "Fine-tune access with individual permissions for each team member.\n\nPermission Categories:\n\n1. Job & Project Permissions:\n   • view_jobs - See all projects\n   • create_jobs - Create new quotes/projects\n   • edit_jobs - Modify existing jobs\n   • delete_jobs - Remove jobs\n   • approve_quotes - Approve client quotes\n   • view_job_costs - See cost prices\n   • manage_job_status - Change status\n   • convert_to_project - Convert quotes\n\n2. Client Permissions:\n   • view_clients - See client list\n   • create_clients - Add new clients\n   • edit_clients - Modify client details\n   • delete_clients - Remove clients\n   • view_client_history - See full activity\n   • export_clients - Export client data\n   • manage_client_access - Grant client portal access\n\n3. Inventory Permissions:\n   • view_inventory - See all inventory\n   • manage_inventory - Add/edit items\n   • delete_inventory - Remove items\n   • view_costs - See cost prices\n   • adjust_stock - Stock adjustments\n   • create_purchase_orders - Order from suppliers\n   • receive_stock - Process deliveries\n\n4. Financial Permissions:\n   • view_pricing - See sell prices\n   • edit_pricing - Change prices\n   • view_costs - See cost prices\n   • view_profit_margins - See profitability\n   • manage_discounts - Apply discounts\n   • process_payments - Record payments\n   • view_financial_reports - Access financial data\n   • export_financial_data - Export reports\n\n5. Calendar Permissions:\n   • view_calendar - See all appointments\n   • create_appointments - Schedule meetings\n   • edit_appointments - Modify bookings\n   • delete_appointments - Cancel appointments\n   • manage_team_schedule - Assign to others\n\n6. Settings Permissions:\n   • manage_settings - Change system settings\n   • manage_users - Add/remove team\n   • manage_roles - Modify roles\n   • manage_integrations - Connect services\n   • view_audit_log - See system changes\n\n7. Communication Permissions:\n   • send_emails - Email clients\n   • send_sms - Text clients\n   • access_email_templates - Use templates\n   • view_communication_history - See all comms\n\n8. Reporting Permissions:\n   • view_reports - Access reports\n   • view_analytics - See dashboards\n   • export_reports - Download data\n   • create_custom_reports - Build reports\n\nManaging Permissions:\n\n1. Role-Based (Recommended):\n   • Assign role, permissions auto-set\n   • Consistent across team\n   • Easy to manage\n   • Quick setup\n\n2. Custom Permissions:\n   • Override role defaults\n   • Add specific permissions\n   • Remove certain permissions\n   • Per-user customization\n   \n   How to Customize:\n   • Settings > Team & Permissions\n   • Select team member\n   • Click 'Customize Permissions'\n   • Check/uncheck individual permissions\n   • Save changes\n   • Audit log records change\n\n3. Permission Groups:\n   • Create custom permission bundles\n   • Assign groups to users\n   • Useful for:\n     - Department-specific access\n     - Project-based teams\n     - Temporary access\n\nPermission Inheritance:\n• Users inherit role permissions\n• Custom permissions override\n• Higher roles include lower permissions\n• Explicit denials take precedence\n\nPermission Testing:\n• View system as other user\n• Test permission sets\n• Verify access levels\n• Before assigning to real users\n\nAudit Trail:\n• All permission changes logged\n• Shows:\n  - Who made change\n  - When\n  - What changed\n  - Reason (if provided)\n• Cannot be deleted\n• Compliance and security\n\nBest Practices:\n• Use roles for most users\n• Customize only when needed\n• Review permissions quarterly\n• Principle of least privilege\n• Remove when no longer needed\n• Document custom access\n• Regular access reviews" 
        },
        { 
          id: "collaboration", 
          title: "Team Collaboration Features", 
          content: "Built-in tools for effective team communication and coordination.\n\nInternal Communication:\n\n1. Job Comments & Notes:\n   • Comment on any job/project\n   • Internal notes (client can't see)\n   • Client-visible notes\n   • @mention team members:\n     - Type @ then name\n     - They get notification\n     - Links to the comment\n   • Rich text formatting\n   • Attach files/images\n   • Comment threads\n   • Mark as resolved\n\n2. Activity Feed:\n   • Real-time updates dashboard widget\n   • Shows:\n     - Job status changes\n     - New quotes created\n     - Appointments scheduled\n     - Comments added\n     - Materials allocated\n     - Payments received\n   • Filter by:\n     - Team member\n     - Date range\n     - Activity type\n   • Click to view detail\n\n3. Task Assignment:\n   • Create tasks for team members\n   • From any job or independently\n   • Task details:\n     - Title and description\n     - Assigned to (person)\n     - Due date\n     - Priority (low/medium/high)\n     - Status (to do/in progress/done)\n     - Attachments\n   • Email notification on assignment\n   • Reminder notifications\n   • Task list in dashboard\n   • Filter and sort tasks\n\n4. Job Sharing:\n   • Share jobs with team:\n     - View only\n     - Can edit\n     - Full access\n   • Multiple people can work on same job\n   • Changes sync in real-time\n   • See who's viewing/editing\n   • Conflict prevention\n\n5. Team Calendar:\n   • Shared calendar view\n   • See everyone's schedule\n   • Team availability\n   • Coordinate installations\n   • Avoid double-booking\n   • Color-coded by person\n\n6. File Sharing:\n   • Upload files to jobs:\n     - Photos\n     - Documents\n     - CAD files\n     - Measurements\n   • Organized by job\n   • Version control\n   • Access permissions\n   • Download by team\n\n7. Internal Messaging:\n   • Direct messages between team\n   • Group conversations\n   • Attached to jobs/clients\n   • Message history\n   • Search messages\n   • File attachments\n\n8. Handoff Process:\n   • Transfer job ownership:\n     - Sales to production\n     - Production to installation\n     - Installation to completion\n   • Handoff checklist:\n     - All info complete\n     - Materials ready\n     - Client confirmed\n     - Team briefed\n   • Notification to new owner\n   • Smooth transitions\n\n9. Team Dashboard:\n   • Overview of team activity\n   • Workload distribution\n   • Active jobs per person\n   • Completion rates\n   • Performance metrics\n   • Identify bottlenecks\n\n10. Notifications:\n    • When @mentioned\n    • Task assigned\n    • Job status changed\n    • Comment replies\n    • Deadline approaching\n    • Client response\n    \n    Configure in Settings:\n    • Email, in-app, or both\n    • Notification frequency\n    • Quiet hours\n    • Group by project\n\n11. Mobile Collaboration:\n    • Mobile app access\n    • Comment from phone\n    • Upload photos on-site\n    • Check calendar\n    • Update job status\n    • Receive notifications\n    • Real-time sync\n\nCollaboration Best Practices:\n• Tag people in relevant comments\n• Keep notes clear and detailed\n• Update job status regularly\n• Complete tasks promptly\n• Use internal vs client notes correctly\n• Upload photos during visits\n• Check notifications daily\n• Respond to @mentions\n• Keep calendar updated" 
        },
      ]
    },
    {
      id: "integrations",
      title: "Integrations & APIs",
      icon: Globe,
      subsections: [
        { 
          id: "shopify", 
          title: "Shopify E-commerce Integration", 
          content: "Comprehensive Shopify integration detailed in the Online Store section above.\n\nQuick Reference:\n\nSetup Process:\n1. Navigate to Inventory > Online Store\n2. Click 'Connect to Shopify' or 'Create Store'\n3. Authenticate and authorize\n4. Configure sync settings\n5. Select products to publish\n\nWhat Syncs:\n• Products → Shopify products\n• Inventory levels (two-way)\n• Orders → InterioApp jobs\n• Customer data → Clients\n• Order fulfillment status\n• Product images and descriptions\n\nManaging Integration:\n• Real-time or scheduled sync\n• Product visibility control\n• Price synchronization\n• Stock level updates\n• Order notifications\n• Analytics and reporting\n\nBenefits:\n• Unified inventory management\n• Automated order processing\n• Reduced manual data entry\n• Real-time stock updates\n• Professional online presence\n• 24/7 sales capability\n\nSee 'Online Store' section for complete Shopify documentation." 
        },
        { 
          id: "supabase", 
          title: "Supabase Backend Integration", 
          content: "InterioApp is built on Supabase, providing powerful backend capabilities.\n\nSupabase Features Used:\n\n1. Database (PostgreSQL):\n   • All data stored securely\n   • Relational database\n   • Complex queries and relationships\n   • Row Level Security (RLS)\n   • Real-time subscriptions\n   • Automatic backups\n\n2. Authentication:\n   • User login/signup\n   • Email verification\n   • Password reset\n   • Session management\n   • Role-based access\n   • OAuth providers (Google, etc.)\n\n3. Storage:\n   • File uploads (photos, documents)\n   • Secure file storage\n   • Public and private buckets\n   • CDN delivery\n   • Image optimization\n\n4. Edge Functions:\n   • Serverless backend logic\n   • API integrations\n   • Custom business logic\n   • Background jobs\n   • Automated processes\n\n5. Realtime:\n   • Live updates\n   • Collaborative features\n   • Instant notifications\n   • Presence detection\n\nAccessing Supabase:\n• Database: View tables and data\n• Users: Manage user accounts\n• Storage: Browse uploaded files\n• Functions: View edge function logs\n• SQL Editor: Run custom queries\n\nManaged by InterioApp:\n• Automatic setup\n• Schema management\n• Security policies\n• Performance optimization\n• Scaling handled automatically\n\nDeveloper Access:\n• Settings > Advanced > Supabase\n• View connection details\n• Access dashboard\n• Run SQL queries\n• View logs and metrics\n• Monitor performance" 
        },
        { 
          id: "email-service", 
          title: "Email Service Integration", 
          content: "InterioApp uses Resend for reliable email delivery.\n\nEmail Capabilities:\n\n1. Transactional Emails:\n   • Quote delivery\n   • Appointment confirmations\n   • Password resets\n   • Account notifications\n   • Order confirmations\n   • Status updates\n\n2. Marketing Emails:\n   • Client newsletters\n   • Promotional campaigns\n   • Seasonal offers\n   • New product announcements\n   • Event invitations\n\n3. Automated Emails:\n   • Welcome series\n   • Abandoned quote follow-ups\n   • Appointment reminders\n   • Review requests\n   • Re-engagement campaigns\n\nEmail Features:\n• Professional templates\n• Your branding (logo, colors)\n• Responsive design (mobile-friendly)\n• Deliverability optimization\n• Spam score checking\n• Bounce handling\n• Unsubscribe management\n• GDPR compliance\n\nEmail Tracking:\n• Delivery status\n• Open rates\n• Click rates\n• Bounce tracking\n• Spam reports\n• Engagement metrics\n\nConfiguration:\n• Settings > Communication > Email\n• Configure sending domain\n• Set from name and address\n• Default reply-to\n• Email signature\n• Legal footers\n\nBest Practices:\n• Use your domain (@yourbusiness.com)\n• Keep subject lines clear\n• Personalize content\n• Test before sending\n• Monitor deliverability\n• Clean email lists regularly\n• Respect unsubscribes" 
        },
        { 
          id: "webhooks", 
          title: "Webhooks & API Access", 
          content: "Connect InterioApp to external systems using webhooks and APIs.\n\nWebhooks (Outgoing):\n\nWhat are Webhooks?\n• Real-time event notifications\n• Sent to your specified URL\n• HTTP POST requests\n• JSON payload with event data\n\nSupported Events:\n• client.created - New client added\n• client.updated - Client info changed\n• job.created - New quote/project\n• job.status_changed - Status updated\n• job.completed - Job finished\n• appointment.created - Appointment scheduled\n• appointment.reminder - Reminder sent\n• inventory.low_stock - Stock below threshold\n• order.received - Shopify order received\n• payment.received - Payment recorded\n\nSetting Up Webhooks:\n1. Settings > Integrations > Webhooks\n2. Click 'Add Webhook'\n3. Enter webhook URL (your endpoint)\n4. Select events to subscribe\n5. Optional: Add secret key for verification\n6. Test webhook\n7. Activate\n\nWebhook Payload Example:\n```json\n{\n  \"event\": \"job.status_changed\",\n  \"timestamp\": \"2025-01-15T14:30:00Z\",\n  \"data\": {\n    \"job_id\": \"123456\",\n    \"old_status\": \"quoted\",\n    \"new_status\": \"approved\",\n    \"client_id\": \"789\",\n    \"job_value\": 2500.00\n  }\n}\n```\n\nRetry Logic:\n• Failed webhooks retried automatically\n• 3 attempts with backoff\n• Delivery logs maintained\n• Alert on repeated failures\n\nSecurity:\n• HTTPS required\n• Secret key verification\n• IP whitelist option\n• Request signing\n• Timestamp validation\n\nAPI Access (Coming Soon):\n\nRESTful API:\n• Programmatic access to your data\n• Create, read, update, delete\n• Authentication via API keys\n• Rate limiting applied\n• Comprehensive documentation\n\nUse Cases:\n• Custom integrations\n• Mobile app development\n• Business intelligence tools\n• Accounting software sync\n• Custom reporting dashboards\n• Third-party app connections\n\nGenerate API Keys:\n• Settings > Integrations > API Access\n• Create key with scopes:\n  - Read only\n  - Read and write\n  - Full access\n• Store securely\n• Rotate regularly\n• Revoke if compromised\n\nIntegration Ideas:\n• Zapier for automations\n• Connect to accounting (Xero, QuickBooks)\n• CRM synchronization\n• Marketing platforms\n• Analytics tools\n• Custom business apps" 
        },
      ]
    },
    {
      id: "business-settings",
      title: "Business Settings",
      icon: Settings,
      subsections: [
        { id: "company-profile", title: "Company Profile", content: "Settings > Business Settings > Company Profile\n\nConfigure:\n• Company name and trading name\n• Logo (appears on quotes, invoices, emails)\n• Business address\n• Phone and email\n• Website URL\n• Tax ID / ABN / VAT number\n• Business registration details\n• Social media links\n• Business hours" },
        { id: "pricing-rules", title: "Pricing & Markup", content: "Settings > Business Settings > Pricing\n\nDefault Markups:\n• Set category-specific markups\n• Fabrics: 40-100% typical\n• Hardware: 30-50% typical\n• Labor: 30-50% typical\n• Override per item if needed\n\nMinimum Margins:\n• Set minimum profit margin %\n• System warns if below threshold\n• Prevent underpricing\n\nRounding Rules:\n• Round to nearest $5, $10, $50\n• Psychological pricing ($99 vs $100)" },
        { id: "measurement-units", title: "Measurement Units", content: "Settings > Business Settings > Units\n\nOptions:\n• Metric (meters, cm)\n• Imperial (feet, inches)\n• Mixed mode\n\nAuto-converts in quotes and reports" },
        { id: "tax-settings", title: "Tax Configuration", content: "Settings > Business Settings > Tax\n\n• GST/VAT rate %\n• Tax inclusive or exclusive\n• Multiple rates by region\n• Tax exemptions\n• Tax registration number" },
        { id: "job-statuses", title: "Custom Job Statuses", content: "Settings > Job Statuses\n\n• Add custom statuses\n• Set colors\n• Define workflow order\n• Automation triggers\n• Archive old statuses" },
      ]
    },
    {
      id: "automation",
      title: "Automation & Workflows",
      icon: Zap,
      subsections: [
        { id: "workflows", title: "Automated Workflows", content: "Settings > Automation > Workflows\n\nTrigger-based automation:\n• When job status = Quoted → Email quote\n• When job status = Approved → Create tasks\n• When appointment created → Send confirmation\n• When stock low → Email alert\n• When payment received → Update status" },
        { id: "email-templates", title: "Email Templates", content: "Settings > Communication > Templates\n\nCustomize templates for:\n• Quote delivery\n• Appointment confirmation\n• Status updates\n• Payment reminders\n• Thank you emails\n\nUse merge fields: {client_name}, {quote_number}, {amount}" },
        { id: "notifications", title: "Notification Settings", content: "Settings > Notifications\n\nPer-user preferences:\n• Email notifications\n• In-app alerts\n• Mobile push\n• Digest options\n• Quiet hours" },
      ]
    },
    {
      id: "reporting",
      title: "Reports & Analytics",
      icon: BarChart3,
      subsections: [
        { id: "dashboard-analytics", title: "Dashboard Analytics", content: "Dashboard shows:\n• Revenue (current vs previous period)\n• Active projects count\n• Conversion rates\n• Top clients\n• Upcoming appointments\n• Pending tasks\n• Stock alerts" },
        { id: "sales-reports", title: "Sales Reports", content: "Reports > Sales\n\n• Revenue by period\n• Quote to project conversion\n• Average job value\n• Sales by client type (B2B/B2C)\n• Sales by product category\n• Win/loss analysis\n• Sales pipeline" },
        { id: "inventory-reports", title: "Inventory Reports", content: "Reports > Inventory\n\n• Stock levels\n• Low stock alerts\n• Stock value\n• Usage by product\n• Supplier performance\n• Aging inventory\n• Reorder requirements" },
        { id: "financial-reports", title: "Financial Reports", content: "Reports > Financial\n\n• Profit & loss\n• Margins by job\n• Cost analysis\n• Payment tracking\n• Outstanding invoices\n• Revenue forecasting" },
      ]
    },
    {
      id: "purchasing",
      title: "Purchasing & Orders",
      icon: DollarSign,
      subsections: [
        { id: "ordering-hub", title: "Ordering Hub", content: "Navigate to Ordering Hub\n\nManage:\n• Purchase orders\n• Supplier orders\n• Batch ordering from multiple jobs\n• Track deliveries\n• Receive stock\n• Invoice matching" },
        { id: "batch-ordering", title: "Batch Ordering", content: "Order materials for multiple jobs:\n1. System shows all materials needed\n2. Groups by supplier\n3. Create purchase orders\n4. Email to suppliers\n5. Track delivery\n6. Receive and allocate to jobs" },
        { id: "po-tracking", title: "Purchase Order Tracking", content: "Track PO status:\n• Draft → Sent → Acknowledged → In Transit → Received\n• Partial deliveries\n• Invoice reconciliation\n• Payment tracking" },
      ]
    },
    {
      id: "documents",
      title: "Documents & Templates",
      icon: FileText,
      subsections: [
        { id: "quote-templates", title: "Quote Documents", content: "Professional quote PDFs:\n• Your branding\n• Itemized pricing\n• Terms and conditions\n• Validity period\n• Digital signature option\n• Email or download" },
        { id: "invoice-templates", title: "Invoice Documents", content: "Create invoices:\n• Linked to projects\n• Payment terms\n• Multiple payment methods\n• Track payment status\n• Automated reminders" },
        { id: "document-storage", title: "Document Management", content: "Store and organize:\n• Client documents\n• Measurement sheets\n• Photos\n• Signed contracts\n• Certificates\n• Warranty information" },
      ]
    },
  ];

  const filteredSections = sections.map(section => ({
    ...section,
    subsections: section.subsections.filter(sub =>
      sub.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
      sub.content.toLowerCase().includes(searchQuery.toLowerCase())
    )
  })).filter(section => section.subsections.length > 0);

  const currentSection = sections.find(s => s.id === activeSection);

  return (
    <div className="min-h-screen bg-[#0a0a0a] text-white">
      {/* Header */}
      <div className="border-b border-white/10 bg-[#0a0a0a]/95 backdrop-blur sticky top-0 z-50">
        <div className="container mx-auto px-4 py-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="p-2 bg-primary/10 rounded-lg">
                <BookOpen className="h-6 w-6 text-primary" />
              </div>
              <div>
                <h1 className="text-2xl font-bold">Documentation</h1>
                <p className="text-sm text-white/60">Complete guide to using InteriorApp</p>
              </div>
            </div>
            <div className="flex items-center gap-4">
              <Badge variant="outline" className="border-white/20 text-white">
                v1.0
              </Badge>
              {isAdmin && (
                <div className="flex items-center gap-2">
                  <Label htmlFor="admin-mode" className="text-sm text-white/70">
                    Edit Mode
                  </Label>
                  <Switch
                    id="admin-mode"
                    checked={adminMode}
                    onCheckedChange={setAdminMode}
                  />
                </div>
              )}
            </div>
          </div>
          
          {/* Search */}
          <div className="relative mt-4">
            <Search className="absolute left-3 top-2.5 h-4 w-4 text-white/40" />
            <Input
              placeholder="Search documentation..."
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="pl-9 bg-white/5 border-white/10 text-white placeholder:text-white/40 focus:bg-white/10"
            />
          </div>
        </div>
      </div>

      {/* Main Content */}
      <div className="container mx-auto px-4 py-8">
        <div className="grid grid-cols-1 lg:grid-cols-4 gap-6">
          {/* Sidebar Navigation */}
          <div className="lg:col-span-1">
            <Card className="bg-white/[0.08] border-white/20 sticky top-32">
              <CardHeader className="pb-3">
                <CardTitle className="text-white text-base font-bold">Contents</CardTitle>
              </CardHeader>
              <CardContent className="p-2">
                <ScrollArea className="h-[calc(100vh-16rem)]">
                  <div className="space-y-1">
                    {filteredSections.map((section) => {
                      const Icon = section.icon;
                      return (
                        <Button
                          key={section.id}
                          variant={activeSection === section.id ? "secondary" : "ghost"}
                          className={`w-full justify-start text-left ${
                            activeSection === section.id
                              ? "bg-primary/20 text-white border border-primary/30"
                              : "text-white/80 hover:text-white hover:bg-white/10"
                          }`}
                          onClick={() => setActiveSection(section.id)}
                        >
                          <Icon className={`h-4 w-4 mr-2 ${
                            activeSection === section.id ? "text-primary" : "text-white/90"
                          }`} />
                          <span className="text-sm font-medium">{section.title}</span>
                          {section.subsections.length > 0 && (
                            <Badge variant="outline" className="ml-auto border-white/30 text-white/70 text-xs">
                              {section.subsections.length}
                            </Badge>
                          )}
                        </Button>
                      );
                    })}
                  </div>
                </ScrollArea>
              </CardContent>
            </Card>
          </div>

          {/* Content Area */}
          <div className="lg:col-span-3">
            {currentSection && (
              <div className="space-y-6">
                {/* Section Header */}
                <Card className="bg-white/5 border-white/10">
                  <CardHeader>
                    <div className="flex items-center gap-3">
                      {(() => {
                        const Icon = currentSection.icon;
                        return <Icon className="h-8 w-8 text-primary" />;
                      })()}
                      <div>
                        <CardTitle className="text-white text-2xl font-bold">{currentSection.title}</CardTitle>
                        <CardDescription className="text-white/70">
                          {currentSection.subsections.length} articles in this section
                        </CardDescription>
                      </div>
                    </div>
                  </CardHeader>
                </Card>

                {/* Subsections */}
                <div className="space-y-4">
                  {currentSection.subsections.map((subsection, index) => (
                    <Card key={subsection.id} className="bg-white/[0.08] border-white/20 hover:bg-white/[0.12] transition-colors">
                      <CardHeader className="pb-4">
                        <div className="flex items-start justify-between mb-2 gap-3">
                          <div className="flex items-start gap-3 flex-1">
                            <div className="p-2 bg-primary/20 rounded-lg mt-1 flex-shrink-0">
                              <ChevronRight className="h-5 w-5 text-primary" />
                            </div>
                            <div className="flex-1">
                              <CardTitle className="text-white text-xl mb-3 font-semibold">{subsection.title}</CardTitle>
                            </div>
                          </div>
                          {adminMode && isAdmin && (
                            <div className="flex-shrink-0 mt-1">
                              <ScreenshotUploader
                                sectionId={currentSection.id}
                                subsectionId={subsection.id}
                              />
                            </div>
                          )}
                        </div>
                        <div className="pl-14">
                          <CardDescription className="text-white/80 whitespace-pre-line leading-relaxed text-base">
                            {subsection.content}
                          </CardDescription>
                          
                          {/* Screenshot Display */}
                          <ScreenshotDisplay
                            sectionId={currentSection.id}
                            subsectionId={subsection.id}
                            adminMode={adminMode && isAdmin === true}
                          />
                        </div>
                      </CardHeader>
                    </Card>
                  ))}
                </div>
              </div>
            )}

            {/* No results */}
            {filteredSections.length === 0 && (
              <Card className="bg-white/[0.08] border-white/20">
                <CardContent className="flex flex-col items-center justify-center py-12">
                  <Search className="h-12 w-12 text-white/30 mb-4" />
                  <p className="text-white font-medium">No results found for "{searchQuery}"</p>
                  <Button
                    variant="outline"
                    className="mt-4 border-white/30 text-white hover:bg-white/20"
                    onClick={() => setSearchQuery("")}
                  >
                    Clear search
                  </Button>
                </CardContent>
              </Card>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}
